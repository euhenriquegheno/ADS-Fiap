--
-- CRIA A REGRA DE NEGÓCIO ONDE SOMENTE
-- QUANDO FOR INSERT E O CLIENTE ESTIVER COM
-- A QUANTIDADE DE ESTRELAS = 0 ELE SERÁ 
-- CADASTRADO COMO "N" DE NOVO.
--
CREATE OR REPLACE TRIGGER TRG_DB_CLIENTE_STATUS_NOVO
BEFORE INSERT
ON DB_CLIENTE
FOR EACH ROW
WHEN (NEW.QT_ESTRELAS = 0) 
-- PERCEBA QUE A TRIGGER SOMENTE É ACIONADA
-- SE SE TRATAR DE UM EVENTO INSERT E A 
-- QUANTIDADE DE ESTRELAS DO CLIENTE = 0 (ZERO)
BEGIN
    -- NESSA SITUAÇÃO, O CLIENTE DEVE SER CADASTRADO
    -- COM O STATUS "N" de NOVO.
    :NEW.ST_CLIENTE := 'N';
END TRG_DB_CLIENTE_STATUS_NOVO;
