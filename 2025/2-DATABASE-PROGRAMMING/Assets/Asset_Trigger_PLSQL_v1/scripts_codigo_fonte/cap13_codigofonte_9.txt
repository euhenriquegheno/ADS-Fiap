--
-- VAMOS ACIONAR A TRG_DB_PEDIDO_ATUALIZA_CLIENTE
-- CADASTRANDO UM PEDIDO PARA O CLIENTE NÚMERO 8
--


COLUMN NM_CLIENTE FORMAT A20
SELECT  NR_CLIENTE, NM_CLIENTE, 
        QT_PEDIDOS_REALIZADOS, DT_ULTIMA_COMPRA
FROM    DB_CLIENTE
WHERE   NR_CLIENTE = 8;

-- VAMOS ACIONAR A TRG_DB_PEDIDO_ATUALIZA_CLIENTE
-- CADASTRANDO UM PEDIDO PARA O CLIENTE NÚMERO 8
INSERT INTO DB_PEDIDO(
NR_LOJA, NR_PEDIDO, NR_MATRICULA_FUNC_ATD, CD_FORMA_PAGTO,
NR_CLIENTE, CD_LOGRADOURO_CLI, DT_PEDIDO, VL_TOT_PEDIDO, ST_PEDIDO)
VALUES
(
1, 2002, 3, 2,
8,90, SYSDATE, 0, 'A');


COMMIT;

-- VEJA QUE O PEDIDO DO CLIENTE ATUALIZOU AUTOMATICAMENTE
-- O CLIENTE QUE ESTÁ NA TABELA DB_CLIENTE.
SELECT  NR_CLIENTE, NM_CLIENTE, 
        QT_PEDIDOS_REALIZADOS, DT_ULTIMA_COMPRA
FROM    DB_CLIENTE
WHERE   NR_CLIENTE = 8;

